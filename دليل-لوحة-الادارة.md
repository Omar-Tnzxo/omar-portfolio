# 🎛️ دليل لوحة الإدارة الكامل

## 📋 المحتويات
1. [نظرة عامة](#نظرة-عامة)
2. [الوصول إلى لوحة الإدارة](#الوصول-إلى-لوحة-الإدارة)
3. [إنشاء حساب إدمن](#إنشاء-حساب-إدمن)
4. [الميزات الرئيسية](#الميزات-الرئيسية)
5. [إدارة المشاريع](#إدارة-المشاريع)
6. [إدارة الفئات](#إدارة-الفئات)
7. [رفع الصور](#رفع-الصور)
8. [استكشاف الأخطاء](#استكشاف-الأخطاء)

---

## 🎯 نظرة عامة

لوحة الإدارة هي نظام كامل لإدارة محتوى البورتفوليو، تم تطويرها باللغة العربية بالكامل وتتضمن:

- ✅ **واجهة عربية بالكامل**: كل النصوص والرسائل بالعربية
- ✅ **حماية كاملة**: نظام مصادقة آمن مع Supabase Auth
- ✅ **حفظ الجلسة**: تسجيل دخول واحد يبقى نشطاً
- ✅ **إدارة شاملة**: تحكم كامل في المشاريع والفئات
- ✅ **رفع صور**: إمكانية رفع الصور مباشرة
- ✅ **معاينة فورية**: رؤية التغييرات مباشرة

---

## 🔐 الوصول إلى لوحة الإدارة

### الروابط:
```
المحلي (Dev): http://localhost:5173/admin
الإنتاج: https://yoursite.com/admin
```

### تسجيل الدخول:
1. اذهب إلى `/admin`
2. أدخل البريد الإلكتروني وكلمة المرور
3. اضغط "تسجيل الدخول"
4. سيتم تحويلك تلقائياً إلى لوحة التحكم

---

## 👤 إنشاء حساب إدمن

### الطريقة 1: من خلال Supabase Dashboard

#### الخطوة 1: افتح Authentication
1. اذهب إلى Supabase Dashboard
2. افتح مشروعك
3. من القائمة الجانبية → **Authentication**
4. اضغط على **Users**

#### الخطوة 2: أضف مستخدم جديد
1. اضغط **Add user** → **Create new user**
2. املأ البيانات:
   ```
   Email: admin@yourdomain.com
   Password: كلمة مرور قوية (8 أحرف على الأقل)
   Auto Confirm User: ✅ (فعّل هذا الخيار)
   ```
3. اضغط **Create user**

#### الخطوة 3: تأكيد المستخدم (مهم!)
بعد إنشاء المستخدم، **يجب** تأكيده:

1. في قائمة Users، ابحث عن المستخدم الجديد
2. اضغط على المستخدم لفتح التفاصيل
3. ابحث عن حقل **Email Confirmed At**
4. إذا كان فارغاً، اضغط **Confirm email** في الأعلى

### الطريقة 2: من خلال SQL Editor

انسخ والصق هذا الكود في SQL Editor:

```sql
-- إنشاء مستخدم admin جديد
INSERT INTO auth.users (
  instance_id,
  id,
  aud,
  role,
  email,
  encrypted_password,
  email_confirmed_at,
  created_at,
  updated_at,
  confirmation_token,
  raw_user_meta_data
) VALUES (
  '00000000-0000-0000-0000-000000000000',
  gen_random_uuid(),
  'authenticated',
  'authenticated',
  'admin@yourdomain.com', -- غيّر هذا
  crypt('your-strong-password', gen_salt('bf')), -- غيّر هذا
  NOW(),
  NOW(),
  NOW(),
  '',
  '{"role":"admin"}'::jsonb
);
```

**ملاحظة هامة**: غيّر `admin@yourdomain.com` و `your-strong-password` بالقيم الخاصة بك!

---

## ⚡ الميزات الرئيسية

### 1. لوحة التحكم الرئيسية (`/admin/dashboard`)

تعرض إحصائيات سريعة:
- **إجمالي المشاريع**: عدد كل مشاريع البورتفوليو
- **الفئات**: عدد الفئات المتاحة
- **المميزة**: المشاريع المعروضة في الصفحة الرئيسية
- **المنشورة**: المشاريع المتاحة للعامة

إجراءات سريعة:
- إضافة مشروع جديد
- إدارة الفئات
- عرض جميع المشاريع

### 2. إدارة المشاريع (`/admin/projects`)

**البحث والفلترة:**
- بحث بالعنوان أو اسم العميل
- فلترة حسب الحالة:
  - **الكل**: كل المشاريع
  - **المنشورة**: المشاريع المعروضة للجمهور
  - **المسودات**: المشاريع قيد العمل
  - **المميزة**: المشاريع المعروضة في الصفحة الرئيسية

**العمليات على المشروع:**
- **تعديل**: تحرير بيانات المشروع
- **نشر/إلغاء النشر**: التحكم في ظهور المشروع
- **تمييز/إلغاء التمييز**: إضافة/إزالة من الصفحة الرئيسية
- **حذف**: حذف المشروع نهائياً (يطلب تأكيد)

### 3. إضافة/تعديل مشروع (`/admin/projects/new` أو `/admin/projects/edit/:id`)

**المعلومات الأساسية:**
- عنوان المشروع
- اسم العميل
- دورك في المشروع
- الفئة الرئيسية
- الفئة الفرعية (اختياري)

**الوصف:**
- وصف قصير (للكروت)
- وصف كامل (للصفحة التفصيلية)
- التحدي
- الحل

**الوسائط:**
- صورة الغلاف (رابط أو رفع)
- فيديو (رابط YouTube/Vimeo - اختياري)
- معرض صور (روابط متعددة)

**المهارات والتقنيات:**
- مهارات المشروع (tags)
- Frontend Technologies
- Backend Technologies
- الأدوات المستخدمة

**الروابط:**
- رابط المشروع
- رابط GitHub
- رابط Live Demo

**إعدادات النشر:**
- ✅ نشر المشروع
- ✅ مشروع مميز
- ترتيب العرض

**SEO:**
- عنوان الـ Meta
- وصف الـ Meta

---

## 📊 إدارة الفئات

### إضافة فئة جديدة:
1. اذهب إلى `/admin/categories`
2. اضغط "إضافة فئة جديدة"
3. املأ:
   - اسم الفئة
   - Slug (للرابط)
   - اللون (Hex color)
   - الوصف
   - الأيقونة (اختياري)
4. احفظ

### تعديل فئة:
1. ابحث عن الفئة في القائمة
2. اضغط "تعديل"
3. عدّل البيانات
4. احفظ

### حذف فئة:
⚠️ **تحذير**: حذف الفئة سيؤثر على جميع المشاريع المرتبطة بها!

---

## 🖼️ رفع الصور

### طريقتان لإضافة الصور:

#### الطريقة 1: رفع مباشر (موصى به)
1. في نموذج المشروع، ابحث عن حقل "صورة الغلاف"
2. اضغط "Browse" أو "Choose File"
3. اختر الصورة من جهازك
4. انتظر حتى يتم الرفع
5. سيتم عرض رابط الصورة تلقائياً

**المتطلبات:**
- الحجم الأقصى: 5MB
- الصيغ المدعومة: JPG, PNG, WebP, GIF
- الأبعاد الموصى بها: 1200x800 بكسل

#### الطريقة 2: رابط خارجي
1. ارفع الصورة على خدمة خارجية (مثل Imgur, Cloudinary)
2. انسخ رابط الصورة المباشر
3. الصق الرابط في حقل "رابط الصورة"

**نصيحة**: استخدم صيغة WebP للحصول على أفضل أداء!

---

## 🔧 استكشاف الأخطاء

### المشكلة: لا أستطيع تسجيل الدخول

**الحلول:**
1. **تأكد من صحة البيانات**:
   - البريد الإلكتروني صحيح
   - كلمة المرور صحيحة (حساسة للحروف الكبيرة والصغيرة)

2. **تأكد من تأكيد البريد**:
   - اذهب إلى Supabase Dashboard → Authentication → Users
   - تحقق من أن `Email Confirmed At` ليس فارغاً
   - إذا كان فارغاً، اضغط "Confirm email"

3. **تأكد من إعدادات Supabase**:
   - في `.env.local` أو Netlify Environment Variables
   - تحقق من `VITE_SUPABASE_URL` و `VITE_SUPABASE_ANON_KEY`

4. **امسح الـ Cache**:
   ```
   localStorage.clear()
   ```
   ثم أعد تحميل الصفحة

### المشكلة: "Supabase not configured"

**الحل:**
1. تأكد من وجود ملف `.env.local` في المجلد الرئيسي
2. تأكد من احتوائه على:
   ```
   VITE_SUPABASE_URL=https://your-project-id.supabase.co
   VITE_SUPABASE_ANON_KEY=your-anon-key-here
   ```
3. أعد تشغيل السيرفر:
   ```bash
   npm run dev
   ```

### المشكلة: لا تظهر المشاريع في لوحة الإدارة

**الحل:**
1. تأكد من إنشاء الجداول في Supabase (راجع `SUPABASE-SETUP-GUIDE.md`)
2. تأكد من تشغيل `supabase-seed.sql` لإضافة بيانات تجريبية
3. افتح Console في المتصفح وابحث عن أخطاء

### المشكلة: رفع الصور لا يعمل

**الحل:**
1. تأكد من إنشاء bucket "portfolio-images" في Supabase Storage
2. تأكد من أن الـ bucket عام (Public)
3. تحقق من Policies:
   ```sql
   -- في SQL Editor
   CREATE POLICY "Allow public read access"
   ON storage.objects FOR SELECT
   USING (bucket_id = 'portfolio-images');
   
   CREATE POLICY "Allow authenticated upload"
   ON storage.objects FOR INSERT
   WITH CHECK (bucket_id = 'portfolio-images' AND auth.role() = 'authenticated');
   ```

### المشكلة: الصفحة سوداء بعد الرفع على Netlify

**الحل:**
1. افتح Netlify Dashboard
2. اذهب إلى Site settings → Environment variables
3. تأكد من إضافة:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
4. أعد Deploy الموقع

---

## 🚀 نصائح للاستخدام الأمثل

### 1. المشاريع المميزة
- اختر فقط أفضل 3 مشاريع لتكون "مميزة"
- هذه ستظهر في الصفحة الرئيسية
- اجعلها متنوعة (مثلاً: Mobile + Web + Social Media)

### 2. الصور
- استخدم صور عالية الجودة (1200x800 على الأقل)
- حوّل الصور إلى WebP لتحسين السرعة
- تأكد من أن الصور ذات صلة بالمشروع

### 3. الوصف
- الوصف القصير: 1-2 جملة فقط
- الوصف الكامل: 2-3 فقرات
- التحدي والحل: كن محدداً وواضحاً

### 4. المهارات
- أضف 4-6 مهارات لكل مشروع
- ركّز على المهارات الأساسية فقط
- استخدم أسماء معيارية (React لا ReactJS)

### 5. SEO
- عنوان Meta: 50-60 حرف
- وصف Meta: 150-160 حرف
- استخدم كلمات مفتاحية ذات صلة

---

## 📞 الدعم

إذا واجهت أي مشكلة:
1. راجع قسم [استكشاف الأخطاء](#استكشاف-الأخطاء)
2. اقرأ ملف `SUPABASE-SETUP-GUIDE.md`
3. تحقق من Console في المتصفح للأخطاء
4. راجع Supabase Logs في Dashboard

---

## ✅ قائمة التحقق السريعة

قبل البدء، تأكد من:
- [x] إنشاء مشروع Supabase
- [x] تشغيل `supabase-schema.sql`
- [x] تشغيل `supabase-seed.sql`
- [x] إنشاء bucket "portfolio-images"
- [x] إضافة environment variables
- [x] إنشاء مستخدم admin
- [x] تأكيد email المستخدم

---

## 🎉 ملاحظات ختامية

لوحة الإدارة تم تصميمها لتكون:
- **سهلة الاستخدام**: واجهة بسيطة وواضحة
- **قوية**: ميزات احترافية متكاملة
- **آمنة**: حماية كاملة للبيانات
- **سريعة**: أداء محسّن
- **عربية بالكامل**: كل شيء بالعربية

استمتع بإدارة بورتفوليوك! 🚀
